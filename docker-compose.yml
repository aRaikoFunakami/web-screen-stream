services:
  server:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8200:8200"
    environment:
      - DISPLAY_NUM=99
      - SCREEN_WIDTH=1280
      - SCREEN_HEIGHT=720
      - PORT=8200
    deploy:
      resources:
        limits:
          memory: 2G
          cpus: '2.0'

  web:
    build:
      context: ./example
      dockerfile: Dockerfile
    ports:
      - "3001:3001"
    environment:
      - VITE_HTTP_PROXY_TARGET=http://server:8200
      - VITE_WS_PROXY_TARGET=ws://server:8200
    depends_on:
      - server
